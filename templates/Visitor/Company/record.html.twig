{% extends 'Visitor/Company/layoutCompany.html.twig' %}

 {% block title %}Entreprise - Historique{% endblock %}
 {% block stylesheets %}{{ encore_entry_link_tags('css/appCompany') }}{% endblock %}

 {% block header %}
     <div class="row">
         <a class="col-1" href="{{ path('profile_index') }}"><i class="fas fa-home"></i></a>
         <h1 class="col text-center">Historique {{ company.name }}</h1>
     </div>
 {% endblock %}

 {% block body %}
     <table class="table mt-4 mt-md-5 text-center">
         <thead class="thead bg-info text-center">
         <tr>
             <th scope="col">Date</th>
             <th scope="col" class="ml-3">Poids</th>
             <th scope="col">Status</th>
             <th scope="col">Détails</th>
         </tr>
         </thead>
         <tbody>
         {% for offer in company.offers %}
             <tr>
                 <th scope="row">{{ offer.end ? offer.end|date('d/m') : '' }}</th>
                 <td>{{ offer.weight }} kg</td>
                 <td><i class="fas {{ offer.status.classfontawesome }}" style="color:{{ offer.status.color }}"></i> {{ offer.status.statustext }}</td>
                 <td data-toggle="modal" data-target="#ModalOffer"><i class="far fa-eye text-center text-info"></i></td>
             </tr>
             <div class="modal fade" id="ModalOffer" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                 <div class="modal-dialog" role="document">
                     <div class="modal-content">
                         <div class="modal-body">
                             <div class="row">
                                 <ul class="col-6">
                                     <li ><strong class="text-info">Quantité :</strong> {{ offer.weight }} Kg </li>
                                     <li class="mt-1"><strong class="text-info">Entreprise :</strong> {{ offer.company.name }}</li>
                                     <li ><strong class="text-info">Date :</strong> {{ offer.end ? offer.end|date('d/m') : '' }}</li>

                                 </ul>
                                 <img class="col-6"
                                      src="{{ offer.picture ? vich_uploader_asset(offer, 'pictureFile') : asset('/build/images/wastityPlaceHolder.png') }}"
                                      alt="ImageOffre"/>
                                 <p class="col-12 mt-1"><strong class="text-info">Description</strong> : {{ offer.description }}
                                 </p>
                                 <p class="col-12 mt-1"><strong class="text-info">Informations complémentaires</strong>
                                     : {{ offer.complementary }}</p>

                                 {% if offer.association is not null %}
                                     <p class="col-12 mt-1"><strong class="text-info">Association bénéficiaire</strong>
                                        : {{ offer.association.name}}
                                     </p>
                                 {% endif %}

                                 {% if offer.foodhero is not null %}
                                     <p class="col-12 mt-1"><strong class="text-info">FoodHero</strong>
                                        : {{ offer.foodhero.user.firstname ~ ' ' ~ offer.foodhero.user.lastname}}
                                     </p>
                                 {% endif %}
                                 <p class="col-12 mt-1"><strong class="text-info">Status</strong>
                                     : {{ offer.status.statustext }}</p>

                             </div>
                         </div>
                         <div class="modal-footer">
                             <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                         </div>
                     </div>
                 </div>
             </div>
         {% endfor %}
         </tbody>
     </table>
 {% endblock %}